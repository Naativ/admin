{"remainingRequest":"/Users/narfdre/Code/hexly/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/narfdre/Code/hexly/admin/src/views/users/UsersDashboard.vue?vue&type=style&index=0&id=4eb363e6&scoped=true&lang=css&","dependencies":[{"path":"/Users/narfdre/Code/hexly/admin/src/views/users/UsersDashboard.vue","mtime":1572899921000},{"path":"/Users/narfdre/Code/hexly/admin/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/narfdre/Code/hexly/admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/narfdre/Code/hexly/admin/node_modules/postcss-loader/lib/index.js","mtime":499162500000},{"path":"/Users/narfdre/Code/hexly/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/narfdre/Code/hexly/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.full-height {\n  height: 77% !important;\n}\n.main-card {\n  min-height: calc(100vh - 200px);\n}\n",{"version":3,"sources":["UsersDashboard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4JA;AACA;AACA;AACA;AACA;AACA","file":"UsersDashboard.vue","sourceRoot":"src/views/users","sourcesContent":["<template>\n  <v-card class=\"main-card\">\n    <v-card-title primary-title>\n      <v-flex xs12>\n        <v-form @submit.prevent=\"resetIndexSearch\" ref=\"form\" v-model=\"valid\" lazy-validation>\n          <v-layout>\n            <v-flex xs9>\n              <v-flex xs12>\n                <v-text-field required v-model=\"term\" label=\"Search Term\"></v-text-field>\n              </v-flex>\n              <v-flex xs12>\n                <v-combobox\n                  chips\n                  :disabled=\"availableTags.loading\"\n                  @input=\"resetIndexSearch\"\n                  :items=\"availableTags.values\"\n                  item-text=\"name\"\n                  item-value=\"id\"\n                  label=\"Tags\"\n                  :loading=\"loading\"\n                  v-model=\"tags\"\n                  multiple\n                  solo\n                >\n                  <template slot=\"selection\" slot-scope=\"data\">\n                    <v-chip\n                      :key=\"'s' + data.item.id\"\n                      :selected=\"data.selected\"\n                      @input=\"resetIndexRemove(data.item)\"\n                      close\n                    >\n                      <strong>{{ data.item.name }}</strong>&nbsp;\n                    </v-chip>\n                  </template>\n                </v-combobox>\n              </v-flex>\n            </v-flex>\n            <v-flex d-flex xs3 child-flex>\n              <v-btn\n                type=\"submit\"\n                :disabled=\"!valid\"\n                :loading=\"loading\"\n                @click=\"resetIndexSearch\"\n              >submit</v-btn>\n            </v-flex>\n          </v-layout>\n        </v-form>\n      </v-flex>\n    </v-card-title>\n    <!-- Search Results -->\n    <v-card-text>\n      <div class=\"text-xs-center\" v-if=\"loading\">\n        <v-progress-circular indeterminate color=\"primary\"></v-progress-circular>\n      </div>\n      <v-list v-if=\"!loading\" two-line>\n        <template v-for=\"item in searched.results\">\n          <v-list-tile :key=\"item.id\" avatar @click=\"open(item)\">\n            <v-list-tile-avatar>\n              <img :src=\"item.profileUrl\" v-if=\"item.profileUrl\" />\n              <v-icon v-else>person</v-icon>\n            </v-list-tile-avatar>\n            <v-list-tile-content>\n              <v-list-tile-title>{{item.displayName}}</v-list-tile-title>\n              <v-list-tile-sub-title>\n                <v-layout row wrap>\n                  <v-flex xs6 sm3>MRN: {{item.mrn}}</v-flex>\n                  <v-flex xs6 sm3>System ID: {{item.id}}</v-flex>\n                  <v-flex xs6 sm3>Email: {{getEmail(item)}}</v-flex>\n                  <v-flex xs6 sm3 class=\"align-right\">\n                    <v-tooltip left>\n                      <a slot=\"activator\">{{item.tags.length}} tags</a>\n                      <v-list>\n                        <v-list-tile v-for=\"(tag, index) in item.tags\" :key=\"index\">\n                          <v-list-tile-title>{{ tag }}</v-list-tile-title>\n                        </v-list-tile>\n                      </v-list>\n                    </v-tooltip>\n                  </v-flex>\n                </v-layout>\n              </v-list-tile-sub-title>\n            </v-list-tile-content>\n          </v-list-tile>\n        </template>\n      </v-list>\n      <v-layout justify-space-around align-center>\n        <v-pagination v-if=\"length >= 1 && !loading\" v-model=\"index\" :length=\"length\"></v-pagination>\n      </v-layout>\n    </v-card-text>\n  </v-card>\n</template>\n\n<script>\nimport { get } from 'lodash'\nimport { mapActions, mapState } from 'vuex'\nimport { UsersActions } from '@/users/UsersStore'\n\nexport default {\n  data () {\n    return {\n      loading: false,\n      valid: true,\n      term: '',\n      tags: [],\n      pageSize: 25,\n      index: 1,\n      length: 0\n    }\n  },\n  methods: {\n    ...mapActions([UsersActions.FETCH_USERS]),\n    open (user) {\n      this.$router.push('/members/' + user.id)\n    },\n    resetIndexSearch () {\n      this.index = 1\n      this.search()\n    },\n    async search () {\n      this.loading = true\n      const { term, tags } = this\n      await this.usersFetch({ term, tags: tags.map(e => e.name), first: this.pageSize, after: (this.index - 1) * this.pageSize })\n      this.loading = false\n    },\n    resetIndexRemove (item) {\n      this.index = 1\n      this.remove(item)\n    },\n    remove (item) {\n      this.loading = true\n      this.tags.splice(this.tags.indexOf(item), 1)\n      this.tags = [...this.tags]\n      this.search()\n      this.loading = false\n    },\n    getEmail(item) {\n      return get(item, 'contacts[0].emails[0].email', 'No Email for this user')\n    }\n  },\n  computed: {\n    ...mapState({\n      searched: state => state.users.searched,\n      availableTags: state => state.tenants.tags\n    })\n  },\n  watch: {\n    searched (newVal) {\n      this.length = Math.ceil(newVal.totalResults / this.pageSize)\n    },\n    index (newVal) {\n      this.search()\n    }\n  }\n}\n</script>\n\n<style scoped>\n.full-height {\n  height: 77% !important;\n}\n.main-card {\n  min-height: calc(100vh - 200px);\n}\n</style>\n"]}]}